{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/product.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction ProductsComponent_tr_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\")(6, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function ProductsComponent_tr_18_Template_button_click_6_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const product_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.handleCheckProduct(product_r2));\n    });\n    i0.ɵɵelement(7, \"i\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"td\")(9, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function ProductsComponent_tr_18_Template_button_click_9_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const product_r2 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.handleDelete(product_r2));\n    });\n    i0.ɵɵelement(10, \"i\", 12);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const product_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r2.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r2.price);\n    i0.ɵɵadvance(3);\n    i0.ɵɵclassMap(product_r2.checked ? \"bi bi-check\" : \"bi bi-circle\");\n  }\n}\nfunction ProductsComponent_li_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 13)(1, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function ProductsComponent_li_20_Template_button_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const i_r7 = restoredCtx.index;\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.handleGotoPage(i_r7 + 1));\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const i_r7 = ctx.index;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", ctx_r1.currentPge == i_r7 + 1 ? \"btn btn-success\" : \"btn btn-outline-success\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i_r7 + 1, \" \");\n  }\n}\nconst _c0 = function () {\n  return [];\n};\nexport class ProductsComponent {\n  constructor(productService) {\n    this.productService = productService;\n    this.products = [];\n    this.keyword = \"\";\n    this.totalPages = 0;\n    this.pageSize = 3;\n    this.currentPge = 1;\n  }\n  ngOnInit() {\n    this.getProducts();\n  }\n  getProducts() {\n    this.productService.getProducts(this.currentPge, this.pageSize).subscribe({\n      next: resp => {\n        this.products = resp.body;\n        let totalProducts = parseInt(resp.headers.get('x-total-count'));\n        this.totalPages = Math.floor(totalProducts / this.pageSize);\n        if (totalProducts % this.pageSize != 0) {\n          this.totalPages = this.totalPages + 1;\n        }\n        console.log(this.totalPages);\n      },\n      error: err => {\n        console.log(err);\n      }\n    });\n    //this.products=this.productService.getProducts();\n  }\n\n  handleCheckProduct(product) {\n    this.productService.checkProduct(product).subscribe({\n      next: updatedProduct => {\n        // LA VALEUR PAR DEFAUT PAR EXEMPLE C 'EST TRUE SI JE CLIQUE DEVIENT FALSE CA VEUT DIRE DIFFERENT AU VALEUR \n        product.checked = !product.checked;\n        // SI ON UTILISE CA VA APPELER LE GET CHAQUE MODIFICATION\n        //this.getProducts();\n      }\n    });\n  }\n\n  handleDelete(product) {\n    if (confirm(\"Etes vous sûre?\")) this.productService.deleteProduct(product).subscribe({\n      next: value => {\n        //this.getProducts();\n        this.products = this.products.filter(p => p.id != product.id);\n      }\n    });\n  }\n  searchProducts() {\n    this.productService.searchProducts(this.keyword).subscribe({\n      next: value => {\n        this.products = value;\n      }\n    });\n  }\n  handleGotoPage(page) {\n    this.currentPge = page;\n    this.getProducts();\n  }\n}\nProductsComponent.ɵfac = function ProductsComponent_Factory(t) {\n  return new (t || ProductsComponent)(i0.ɵɵdirectiveInject(i1.ProductService));\n};\nProductsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProductsComponent,\n  selectors: [[\"app-products\"]],\n  decls: 21,\n  vars: 4,\n  consts: [[1, \"p-3\"], [1, \"card\"], [1, \"card-body\"], [\"type\", \"text\", 1, \"p-1\", 3, \"ngModel\", \"ngModelChange\"], [1, \"btn\", \"btn-outline-success\", \"ms-1\", 3, \"click\"], [1, \"bi\", \"bi-search\"], [1, \"table\"], [4, \"ngFor\", \"ngForOf\"], [1, \"nav\", \"nav-pills\"], [\"class\", \"p-1\", 4, \"ngFor\", \"ngForOf\"], [1, \"btn\", \"btn-outline-success\", 3, \"click\"], [1, \"btn\", \"btn-outline-danger\", 3, \"click\"], [1, \"bi\", \"bi-trash\"], [1, \"p-1\"], [3, \"ngClass\", \"click\"]],\n  template: function ProductsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 2)(4, \"div\")(5, \"input\", 3);\n      i0.ɵɵlistener(\"ngModelChange\", function ProductsComponent_Template_input_ngModelChange_5_listener($event) {\n        return ctx.keyword = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"button\", 4);\n      i0.ɵɵlistener(\"click\", function ProductsComponent_Template_button_click_6_listener() {\n        return ctx.searchProducts();\n      });\n      i0.ɵɵelement(7, \"i\", 5);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(8, \"table\", 6)(9, \"thead\")(10, \"tr\")(11, \"th\");\n      i0.ɵɵtext(12, \"Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"th\");\n      i0.ɵɵtext(14, \"Price\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"th\");\n      i0.ɵɵtext(16, \"Checked\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(17, \"tbody\");\n      i0.ɵɵtemplate(18, ProductsComponent_tr_18_Template, 11, 4, \"tr\", 7);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(19, \"ul\", 8);\n      i0.ɵɵtemplate(20, ProductsComponent_li_20_Template, 3, 2, \"li\", 9);\n      i0.ɵɵelementEnd()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.keyword);\n      i0.ɵɵadvance(13);\n      i0.ɵɵproperty(\"ngForOf\", ctx.products);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpureFunction0(3, _c0).constructor(ctx.totalPages));\n    }\n  },\n  dependencies: [i2.NgClass, i2.NgForOf, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","ProductsComponent","constructor","productService","ngOnInit","getProducts","currentPge","pageSize","subscribe","next","resp","products","body","totalProducts","parseInt","headers","get","totalPages","Math","floor","console","log","error","err","handleCheckProduct","product","checkProduct","updatedProduct","checked","handleDelete","confirm","deleteProduct","value","filter","p","id","searchProducts","keyword","handleGotoPage","page","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\User\\Desktop\\AN\\angular-total-part1\\src\\app\\products\\products.component.html","C:\\Users\\User\\Desktop\\AN\\angular-total-part1\\src\\app\\products\\products.component.ts"],"sourcesContent":["<div class=\"p-3\">\r\n  <div class=\"card\">\r\n    <div class=\"card-body\">\r\n      <div class=\"card-body\">\r\n        <div>\r\n          <input class=\"p-1\"  type=\"text\" [(ngModel)]=\"keyword\">\r\n          <button  (click)=\"searchProducts()\"\r\n                  class=\"btn btn-outline-success ms-1\">\r\n            <i class=\"bi bi-search\"></i>\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <table class=\"table\">\r\n        <thead>\r\n        <tr>\r\n          <th>Name</th> <th>Price</th> <th>Checked</th>\r\n        </tr>\r\n        </thead>\r\n        <tbody>\r\n         <tr *ngFor=\"let product of products \">\r\n           <td>{{product.name}}</td>\r\n           <td>{{product.price}}</td>\r\n           <td>\r\n             <button (click)=\"handleCheckProduct(product)\"\r\n                     class=\"btn btn-outline-success\">\r\n               <i [class]=\"product.checked?'bi bi-check':'bi bi-circle'\"></i>\r\n             </button>\r\n           </td>\r\n           <td>\r\n             <button (click)=\"handleDelete(product)\" class=\"btn btn-outline-danger\">\r\n               <i class=\"bi bi-trash\"></i>\r\n             </button>\r\n           </td>\r\n         </tr>\r\n        </tbody>\r\n      </table>\r\n      <ul class=\"nav nav-pills\">\r\n        <li class=\"p-1\" *ngFor=\"let page of [].constructor(this.totalPages); let i=index\">\r\n          <button (click)=\"handleGotoPage(i+1)\"\r\n          [ngClass]=\"currentPge==(i+1)?'btn btn-success':\r\n          'btn btn-outline-success'\">\r\n            {{(i+1)}}\r\n          </button>\r\n        </li>\r\n\r\n      </ul>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, OnInit} from '@angular/core';\r\nimport {HttpClient} from \"@angular/common/http\";\r\nimport {ProductService} from \"../services/product.service\";\r\nimport {Product} from \"../model/product.model\";\r\n\r\n\r\n@Component({\r\n  selector: 'app-products',\r\n  templateUrl: './products.component.html',\r\n  styleUrls: ['./products.component.css']\r\n})\r\nexport class ProductsComponent implements OnInit{\r\n  public products :Array<Product>=[];\r\n  public keyword : string=\"\";\r\n  totalPages:number=0;\r\n  pageSize:number=3;\r\n  currentPge:number=1;\r\n  constructor(private productService:ProductService) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getProducts();\r\n  }\r\n\r\n  getProducts(){\r\n    this.productService.getProducts(this.currentPge,this.pageSize)\r\n      .subscribe({\r\n        next : (resp) => {\r\n          this.products=resp.body as Product[];\r\n          let totalProducts:number=parseInt(resp.headers.get('x-total-count')!);\r\n          this.totalPages=Math.floor( totalProducts/this.pageSize);\r\n          if(totalProducts%this.pageSize!=0){\r\n            this.totalPages=this.totalPages+1;\r\n          }\r\n          console.log(this.totalPages);\r\n        },\r\n        error : err => {\r\n          console.log(err);\r\n        }\r\n      })\r\n\r\n    //this.products=this.productService.getProducts();\r\n  }\r\n\r\n\r\n  handleCheckProduct(product: Product) {\r\n    this.productService.checkProduct(product).subscribe({\r\n      next :updatedProduct => {\r\n        // LA VALEUR PAR DEFAUT PAR EXEMPLE C 'EST TRUE SI JE CLIQUE DEVIENT FALSE CA VEUT DIRE DIFFERENT AU VALEUR \r\n        product.checked=!product.checked;\r\n        // SI ON UTILISE CA VA APPELER LE GET CHAQUE MODIFICATION\r\n        //this.getProducts();\r\n      }\r\n    })\r\n  }\r\n\r\n  handleDelete(product: Product) {\r\n    if(confirm(\"Etes vous sûre?\"))\r\n    this.productService.deleteProduct(product).subscribe({\r\n      next:value => {\r\n        //this.getProducts();\r\n        this.products=this.products.filter(p=>p.id!=product.id);\r\n      }\r\n    })\r\n  }\r\n\r\n  searchProducts() {\r\n    this.productService.searchProducts(this.keyword).subscribe({\r\n      next : value => {\r\n        this.products=value;\r\n      }\r\n    })\r\n  }\r\n  handleGotoPage(page:number){\r\n    this.currentPge=page;\r\n    this.getProducts();\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}